@using Microsoft.Extensions.Hosting

<environment include="@Environments.Development">
	<script src="~/lib/jquery-ajax-unobtrusive/jquery.unobtrusive-ajax.js"></script>
</environment>

<environment exclude="@Environments.Development">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajax-unobtrusive/3.2.6/jquery.unobtrusive-ajax.min.js" 
	        integrity="sha256-PAC000yuHt78nszJ2RO0OiDMu/uLzPLRlYTk8J3AO10="
	        crossorigin="anonymous"
			asp-fallback-src="~/lib/jquery-ajax-unobtrusive/jquery.unobtrusive-ajax.min.js"></script>

</environment>

<script>

	function handleAjaxSuccess() {
		var redirectUri = $(this).data('redirect-uri');

		if (redirectUri) {
			window.location.href = redirectUri;
		} else {
			window.location.reload();
		}
	}

	function handleAjaxFailure(xhr) {
		var errorTarget = $('.error-target', $(this));
		$(errorTarget).text(xhr.responseText);
	}

</script>